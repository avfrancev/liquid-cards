webpackJsonp([1],{AG3r:function(t,i){},XBWF:function(t,i){},l7eZ:function(t,i){},orck:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,e,r,n=s("7+uW"),o=s("+Uzz");r=function(t,i){return t+Math.floor(Math.random()*(i-t))},a=function(t){var i,s;for(i=0,s=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetLeft-t.scrollLeft,s+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:s,left:i}},e=function(t,i,s,a,e){var r,n,o,c,h,d,l,u,f,p,v,m;for(v=.01*e,m=Math.floor(t.width*v),h=Math.floor(t.height*v),i.drawImage(s,0,0,m,h),i.drawImage(t,0,0,m,h,0,0,m,h),u=(f=i.getImageData(0,0,m,h).data).length/4,o={size:{w:m,h:h},arr:[]},d=0,p=0,0;d<u;)p=f[l=4*d],c=f[++l],n=f[++l],r=f[++l],o.arr.push({r:p,g:c,b:n,a:r}),d++;return o};s("AG3r");var c=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},h={functional:!0,render:function(t,i){var s;return s=c({},i.data,{props:{name:"avf-transition",tag:"div"},on:{enter:function(t,i){var s;return t.getAttribute("avf-id"),(s=new o.TimelineMax).from(t,1,{opacity:0}),s.from(t,1,{y:30,ease:o.Elastic.easeOut.config(1,.3),onComplete:i},"-=1")}}}),t("transition-group",s,i.children)}},d=s("mtWM"),l=s.n(d),u=s("LfST"),f=s.n(u),p={components:{"avf-transition":h},data:function(){return{cards:[],cardz:[],cardsCount:6}},created:function(){return this.$metrika.hit("/"),this.fetchCards()},methods:{fetchCards:function(){var t,i,s,a;for(this.loading=!0,a=[],t=i=0,s=this.cardsCount;0<=s?i<s:i>s;t=0<=s?++i:--i)a.push((t=>l.a.get(`https://source.unsplash.com/random?sig=${t}`,{}).then(i=>{var s;(s=new Image).onload=(()=>{var s;return s=(new Date).getTime()+t,this.cards.push({id:s,author:f.a.name.findName(),avatar:f.a.image.avatar(),title:f.a.lorem.words(),image_src:i.request.responseURL})}),s.src=i.request.responseURL}))(t));return a},addCard:function(t){return t.id=++this.nextCardId,this.cards.push(t)},removeCard:function(t){return t.$card=this.$el.querySelector(`#card-${t.id}`),t.canvas=new class{constructor(t){this.card=t,this.OFFSET=300,this.SPREAD=300,this.$image=new Image,this.$image.crossOrigin="Anonymous",this.$image.onload=this.init.bind(this),this.$image.src=this.card.image_src}init(t){var i,s;return this.c=document.createElement("canvas"),this.ctx=this.c.getContext("2d"),this.$card__image=document.querySelector(`#card-${this.card.id} .thumb`),this.hCanvas=document.createElement("canvas"),this.hCanvas.width=this.$card__image.offsetWidth,this.hCanvas.height=this.$card__image.offsetHeight,s=this.hCanvas.getContext("2d"),i=e(this.hCanvas,s,this.$image,0,10),({w:this.w,h:this.h}=i.size),this.colors=i.arr.map(function(t){return`rgba(${t.r},${t.g},${t.b},${t.a})`}),this.prepareCanvas(),this.card.$card.parentElement.appendChild(this.c)}prepareCanvas(){var t,i,s,e,n,o,c,h,d;for(this.imgPos=this.$card__image.getBoundingClientRect(),this.c.style.position="absolute",this.c.width=this.imgPos.width+2*this.OFFSET,this.c.height=this.imgPos.height+2*this.OFFSET,({left:o,top:this.top}=a(this.$card__image)),this.c.style.top=`${this.top-this.OFFSET}px`,this.c.style.left=`${o-this.OFFSET}px`,this.c.style.display="none",this.circles=[],e=0,this.ctx.clearRect(0,0,this.c.width,this.c.height),i=n=0,h=this.h;0<=h?n<h:n>h;i=0<=h?++n:--n)for(s=c=0,d=this.w;0<=d?c<d:c>d;s=0<=d?++c:--c)this.ctx.fillStyle=this.colors[e],this.ctx.beginPath(),(t={x:s*this.hCanvas.width/this.w+this.OFFSET+this.hCanvas.width/this.w/2,y:i*this.hCanvas.height/this.h+this.OFFSET+this.hCanvas.width/this.w/2,r:this.hCanvas.width/this.w/2*Math.random()*2,progress:0,height:0,alpha:1,dAlpha:.97,color:this.colors[e]}).dx=r(t.x-this.SPREAD,t.x+this.SPREAD),t.dy=r(t.y-this.SPREAD,t.y+this.SPREAD),this.circles.push(t),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!1),this.ctx.fill(),e++;"function"==typeof this.onReady&&this.onReady()}animate(){var t,i,s,a,e,r;for(this.ctx.clearRect(0,0,this.c.width,this.c.height),r=[],i=s=0,a=(e=this.circles).length;s<a;i=++s)t=e[i],this.ctx.globalAlpha=1-t.progress,this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r*(1-t.progress),0,2*Math.PI,!1),r.push(this.ctx.fill());return r}}(t),t.canvas.onReady=this.animateRemove.bind(this,t)},animateRemove:function(t){var i,s;return i=t.$card,{top:0},(s=new o.TimelineMax).set(t.canvas.c,{display:"block"}),s.set(i,{transition:"none"}),s.fromTo(t.canvas.c,1,{opacity:0},{opacity:1}),s.to(i.querySelector(".thumb"),.1,{opacity:0},"-=1"),s.to(i,1,{y:`-=${i.offsetHeight/2}`,scale:"0",opacity:-1,ease:Expo.easeInOut,onComplete:()=>(s.set(i,{transition:"10.5s"}),this.cards.splice(this.cards.indexOf(t),1))},"-=1"),s.to(t.canvas.circles,3,{x:i=>t.canvas.circles[i].dx,y:i=>t.canvas.circles[i].dy,progress:1,onUpdate:t.canvas.animate.bind(t.canvas),onComplete:()=>{if(t.canvas.c.remove(),this.cards.length<6)return console.log(this.cardsCount=Math.floor(5-5*Math.random())||2),this.fetchCards()}},"-=1")}}},v={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"explode"}},[s("avf-transition",{style:{display:t.cards.length>0?"grid":"none"},attrs:{id:"cards"}},t._l(t.cards,function(i,a){return s("div",{key:i.id,staticClass:"card",attrs:{id:"card-"+i.id,"avf-id":i.id}},[i.image_src?t._e():s("h1",{staticStyle:{"text-align":"center"}},[t._v(" ðŸ˜Ž")]),i.image_src?s("div",{staticClass:"inner"},[s("section",{staticClass:"thumb",style:"background-image:url("+i.image_src+")"}),s("section",{staticClass:"btn-group"},[s("button",{on:{click:function(s){t.removeCard(i)}}},[t._v("âœˆ")]),s("button",{on:{click:function(s){t.removeCard(i)}}},[t._v("â™¥")]),s("button",{staticClass:"remove",on:{click:function(s){t.removeCard(i)}}},[t._v("âœ˜")])]),s("section",{staticClass:"meta"},[s("img",{staticClass:"avatar",attrs:{src:i.avatar}}),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[t._v(t._s(i.title))]),s("div",{staticClass:"author"},[t._v("by "+t._s(i.author))])])])]):t._e()])}))],1)},staticRenderFns:[]},m={name:"app",components:{Explode:s("VU/8")(p,v,!1,function(t){s("l7eZ")},null,null).exports}},g={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("Explode"),this._v(" "),i("svg",{attrs:{id:"svg-liquid",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[i("defs",[i("filter",{attrs:{id:"liquid"}},[i("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"6",result:"blur"}}),this._v(" "),i("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10"}})],1)])])],1)},staticRenderFns:[]},C=s("VU/8")(m,g,!1,function(t){s("XBWF")},null,null).exports,y=s("id+j"),x=s.n(y);n.a.config.productionTip=!1,n.a.use(x.a,{id:47209410,env:"production"}),console.log("production"),new n.a({el:"#app",template:"<App/>",components:{App:C}})}},["orck"]);
//# sourceMappingURL=app.c3b7646b397c8b4bde6c.js.map