{"version":3,"sources":["webpack:///./src/lib/canvas.coffee","webpack:///./src/components/AVF-Transition/index.coffee","webpack:///./src/components/Explode.vue?1591","webpack:///./src/components/Explode.vue?799e","webpack:///src/App.vue","webpack:///./src/components/Explode.vue","webpack:///./src/App.vue?0f23","webpack:///./src/App.vue","webpack:///./src/main.coffee"],"names":["getOffset","pixelate","rand","min","max","Math","floor","random","el","_x","_y","isNaN","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","top","left","canvas","ctx","img","ind","v","a","b","data","g","h","i","index","length","pixelArray","r","size","w","width","height","drawImage","getImageData","arr","push","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","index_coffee","functional","render","createElement","context","props","name","tag","on","enter","done","tl","getAttribute","TweenMax","from","opacity","y","ease","easeOut","config","onComplete","children","Explode","components","avf-transition","cards","cardsCount","created","this","fetchCards","methods","j","ref","results","loading","axios_default","get","then","x","Image","src","request","responseURL","onload","id","Date","getTime","image_src","addCard","card","nextCardId","removeCard","$card","$el","querySelector","[object Object]","OFFSET","SPREAD","$image","crossOrigin","init","bind","e","colorData","hCtx","c","document","getContext","$card__image","hCanvas","offsetWidth","offsetHeight","colors","map","prepareCanvas","parentElement","appendChild","k","l","m","ref1","imgPos","getBoundingClientRect","style","position","display","circles","clearRect","fillStyle","beginPath","progress","alpha","dAlpha","color","dx","dy","arc","PI","fill","onReady","len","globalAlpha","animateRemove","set","transition","fromTo","to","scale","easeInOut","splice","indexOf","cind","onUpdate","animate","remove","console","log","components_Explode","_vm","_h","$createElement","_c","_self","attrs","_l","staticClass","avf-id","_v","_s","click","$event","_e","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","xmlns","version","in","stdDeviation","result","mode","values","src_App","App_normalizeComponent","vue_esm","productionTip","template"],"mappings":"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","file":"static/js/app.07928b62e4da24893ecb.js","sourcesContent":["import {TweenMax, Power0, Elastic} from 'gsap'\n\nrand = (min,max) ->\n  min + Math.floor( Math.random() * (max - min))\n\ngetOffset = (el) ->\n  _x = 0\n  _y = 0\n  while el and !isNaN(el.offsetLeft) and !isNaN(el.offsetTop)\n    _x += el.offsetLeft - (el.scrollLeft)\n    _y += el.offsetTop - (el.scrollTop)\n    el = el.offsetParent\n  {\n    top: _y\n    left: _x\n  }\n\npixelate = (canvas, ctx, img, ind, v) ->\n  # ctx.mozImageSmoothingEnabled = false\n  # ctx.webkitImageSmoothingEnabled = false\n  # ctx.imageSmoothingEnabled = false\n  size = v * 0.01\n  w = Math.floor canvas.width * size\n  h = Math.floor canvas.height * size\n  ctx.drawImage img, 0, 0, w, h\n  ctx.drawImage canvas, 0, 0, w, h, 0, 0, w,h\n\n  imageData = ctx.getImageData 0,0,w,h\n  pixelArray = imageData.data\n  length = pixelArray.length / 4\n\n  data = {\n    size: {w,h}\n    arr: []\n  }\n  i = 0\n  r = 0\n  c = 0\n  while i < length\n    index = 4 * i\n    r = pixelArray[index]\n    g = pixelArray[++index]\n    b = pixelArray[++index]\n    a = pixelArray[++index]\n    data.arr.push {r,g,b,a}\n    i++\n\n  return data\n\n\nexport class Canvas\n  constructor: (@card) ->\n    @OFFSET = 300\n    @SPREAD = 300\n    @$image = new Image\n    @$image.crossOrigin = \"Anonymous\"\n    @$image.onload = @init.bind @\n    @$image.src = @card.image_src\n\n  init: (e)\t->\n    @c = document.createElement 'canvas'\n    @ctx = @c.getContext '2d'\n    @$card__image = document.querySelector \"#card-#{@card.id} .card__image\"\n    @hCanvas = document.createElement 'canvas'\n    @hCanvas.width = @$card__image.offsetWidth\n    @hCanvas.height = @$card__image.offsetHeight\n    hCtx = @hCanvas.getContext '2d'\n    colorData = pixelate @hCanvas, hCtx, @$image, 1, 10\n    {@w,@h} = colorData.size\n    @colors = colorData.arr.map (x) -> \"rgba(#{x.r},#{x.g},#{x.b},#{x.a})\"\n\n    do @prepareCanvas\n    # document.body.appendChild @c\n    @card.$card.parentElement.appendChild @c\n\n\n  prepareCanvas: ->\n    @imgPos = @$card__image.getBoundingClientRect()\n    @c.style.position = 'absolute'\n\n    @c.width = @imgPos.width + @OFFSET*2\n    @c.height = @imgPos.height + @OFFSET*2\n    {left,@top} = getOffset @$card__image\n\n    @c.style.top = \"#{@top-@OFFSET}px\"\n    @c.style.left = \"#{left-@OFFSET}px\"\n    @c.style.display = 'none'\n\n    @circles = []\n\n    k = 0\n    @ctx.clearRect 0,0,@c.width,@c.height\n    for i in [0...@h]\n      for j in [0...@w]\n        @ctx.fillStyle = @colors[k]\n        @ctx.beginPath()\n        c = {\n          x: j*@hCanvas.width/@w + @OFFSET + @hCanvas.width/@w/2\n          y: i*@hCanvas.height/@h + @OFFSET + @hCanvas.width/@w/2\n          r: @hCanvas.width/@w/2*Math.random()*2\n          progress: 0\n          height: 0\n          alpha: 1\n          dAlpha: 0.97\n          color: @colors[k]\n        }\n        c.dx = rand c.x-@SPREAD, c.x+@SPREAD\n        c.dy = rand c.y-@SPREAD, c.y+@SPREAD\n        @circles.push c\n        @ctx.arc c.x, c.y, c.r, 0, 2 * Math.PI, false\n        @ctx.fill()\n        k++\n\n    do @onReady if typeof @onReady is 'function'\n    return\n\n\n  animate: () ->\n    @ctx.clearRect(0,0,@c.width,@c.height)\n    for c,i in @circles\n      @ctx.globalAlpha = 1 - c.progress\n      @ctx.fillStyle = c.color\n      @ctx.beginPath()\n      @ctx.arc c.x, c.y, c.r*(1-c.progress), 0, 2 * Math.PI, false\n      @ctx.fill()\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/canvas.coffee","import './styles.sass'\nimport {TimelineMax, TweenMax, Power4, Elastic, Linear, Expo} from 'gsap'\n\nexport default {\n  functional: true\n  render: (createElement, context) ->\n    data = {\n      context.data...\n      props:\n        name: 'avf-transition'\n        tag: 'div'\n        # css: true\n        # appear: true\n      on:\n        enter: (el, done) ->\n          id = el.getAttribute 'avf-id'\n          tl = new TimelineMax\n          tl.from el, 1, {\n            opacity: 0\n          }\n          tl.from el, 1, {\n            y: 30\n            ease: Elastic.easeOut.config(1, 0.3)\n            onComplete: done\n          }, '-=1'\n    }\n    createElement 'transition-group', data, context.children\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/AVF-Transition/index.coffee","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {TimelineMax, TweenMax, Power4, Elastic, Linear, Expo} from 'gsap'\nimport {Canvas} from '@/lib/canvas.coffee'\nimport AVFTransition from '@/components/AVF-Transition/index.coffee'\nimport axios from 'axios'\n\nexport default {\n\n  components: {'avf-transition': AVFTransition}\n\n  data: ->\n    cards: []\n    cardsCount: 5\n\n  created: ->\n    do @fetchCards\n\n  methods:\n    fetchCards: ->\n      @loading = true\n      for i in [0...@cardsCount]\n        do (i) =>\n          axios.get(\"https://source.unsplash.com/random?sig=#{i}\").then (x) =>\n            img = new Image\n            img.src = x.request.responseURL\n            img.onload = =>\n              @loading = false if i is @cardsCount - 1\n              @cards.push\n                id: new Date().getTime()\n                image_src: x.request.responseURL\n\n\n    addCard: (card) ->\n      card.id = ++@nextCardId\n      @cards.push card\n\n    removeCard: (card) ->\n      card.$card = @$el.querySelector \"#card-#{card.id}\"\n      card.canvas = new Canvas card\n      card.canvas.onReady = @animateRemove.bind @, card\n\n    animateRemove: (card) ->\n      el = card.$card\n      clipMask =\n        top: 0\n\n      tl = new TimelineMax\n\n      tl.set card.canvas.c, {display: 'block'}\n      tl.set el, {transition: 'none'}\n\n      tl.fromTo card.canvas.c, 1, {opacity:0}, {opacity:1}\n\n      tl.to el.querySelector('.card__image'), 0.1, {\n        opacity: 0\n      }, '-=1'\n\n      tl.to el, 1, {\n        y:\"-=#{el.offsetHeight/3}\"\n        scale: '0'\n        opacity: -1\n        ease: Expo.easeInOut\n        # onComplete: -> console.log '---------'\n        onComplete: =>\n          # card.canvas.c.remove()\n          tl.set el, {transition: '10.5s'}\n          @cards.splice @cards.indexOf(card), 1\n      }, '-=1'\n\n      tl.to card.canvas.circles, 3, {\n        x: (cind) => card.canvas.circles[cind].dx\n        y: (cind) => card.canvas.circles[cind].dy\n        # ease: Expo.easeInOut\n        progress: 1\n        onUpdate: card.canvas.animate.bind card.canvas\n        onComplete: =>\n          card.canvas.c.remove()\n          if @cards.length < 3\n            console.log @cardsCount = Math.floor(5 - Math.random()*5) or 2\n            do @fetchCards\n      }, '-=1'\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Explode.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"explode\"}},[_c('avf-transition',{style:({ display: _vm.cards.length > 0 ? 'grid' : 'none' }),attrs:{\"id\":\"cards\"}},_vm._l((_vm.cards),function(card,i){return _c('div',{key:card.id,staticClass:\"card\",attrs:{\"id\":'card-'+card.id,\"avf-id\":card.id}},[_c('div',{staticClass:\"card__inner\"},[_c('div',{staticClass:\"card__image\",style:('background-image:url('+card.image_src+')')}),_c('h4',[_vm._v(\"Card \"+_vm._s(card.id))]),_c('button',{on:{\"click\":function($event){_vm.removeCard(card)}}},[_vm._v(\"DEL\")])])])})),(!_vm.loading && _vm.cards.length == 0)?_c('div',{attrs:{\"id\":\"refresh\"}},[_c('button',{on:{\"click\":_vm.fetchCards}},[_vm._v(\"refresh\")])]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29d4e6ba\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Explode.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Explode/>\n    <svg id=\"svg-liquid\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n      <defs>\n        <filter id=\"liquid\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"6\" result=\"blur\" />\n          <feColorMatrix in=\"blur\" mode=\"matrix\" values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10\"/>\n        </filter>\n      </defs>\n    </svg>\n  </div>\n</template>\n\n<script>\nimport Explode from './components/Explode'\n\nexport default {\n  name: 'app',\n  components: {\n    Explode\n  }\n}\n</script>\n\n<style lang=\"sass\">\n\n  @import './colors.sass'\n\n  body\n    background: $color1\n    margin: 0\n\n  #app\n    font-family: 'Avenir', Helvetica, Arial, sans-serif\n    -webkit-font-smoothing: antialiased\n    -moz-osx-font-smoothing: grayscale\n    overflow: hidden\n    color: #fff\n\n  #svg-liquid\n    position: absolute\n    top: -999px\n    visibility: hidden\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29d4e6ba\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Explode.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!coffee-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Explode.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29d4e6ba\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Explode.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Explode.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Explode'),_vm._v(\" \"),_c('svg',{attrs:{\"id\":\"svg-liquid\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_c('defs',[_c('filter',{attrs:{\"id\":\"liquid\"}},[_c('feGaussianBlur',{attrs:{\"in\":\"SourceGraphic\",\"stdDeviation\":\"6\",\"result\":\"blur\"}}),_vm._v(\" \"),_c('feColorMatrix',{attrs:{\"in\":\"blur\",\"mode\":\"matrix\",\"values\":\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10\"}})],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-903b38a4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-903b38a4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-903b38a4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\nnew Vue(\n  el: '#app'\n  template: '<App/>'\n  components: App: App)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.coffee"],"sourceRoot":""}