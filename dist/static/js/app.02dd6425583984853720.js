webpackJsonp([1],{AG3r:function(t,s){},XBWF:function(t,s){},orck:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a,e,r,n=i("7+uW"),o=i("+Uzz");r=function(t,s){return t+Math.floor(Math.random()*(s-t))},a=function(t){var s,i;for(s=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)s+=t.offsetLeft-t.scrollLeft,i+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:i,left:s}},e=function(t,s,i,a,e){var r,n,o,c,h,d,l,u,f,p,v,m;for(v=.01*e,m=Math.floor(t.width*v),h=Math.floor(t.height*v),s.drawImage(i,0,0,m,h),s.drawImage(t,0,0,m,h,0,0,m,h),u=(f=s.getImageData(0,0,m,h).data).length/4,o={size:{w:m,h:h},arr:[]},d=0,p=0,0;d<u;)p=f[l=4*d],c=f[++l],n=f[++l],r=f[++l],o.arr.push({r:p,g:c,b:n,a:r}),d++;return o};i("AG3r");var c=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},h={functional:!0,render:function(t,s){var i;return i=c({},s.data,{props:{name:"avf-transition",tag:"div"},on:{enter:function(t,s){var i;return t.getAttribute("avf-id"),(i=new o.TimelineMax).from(t,1,{opacity:0}),i.from(t,1,{y:30,ease:o.Elastic.easeOut.config(1,.3),onComplete:s},"-=1")}}}),t("transition-group",i,s.children)}},d=i("mtWM"),l=i.n(d),u=i("LfST"),f=i.n(u),p=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},v={components:{"avf-transition":h},data:function(){return{cards:[],cardz:[],cardsCount:6}},created:function(){return this.fetchCards()},methods:{fetchCards:function(){var t,s,i,a,e;for(this.loading=!0,e=[],t=i=0,a=this.cardsCount;0<=a?i<a:i>a;t=0<=a?++i:--i)s=(new Date).getTime()+t,this.cards.push({id:s,author:f.a.name.findName(),avatar:f.a.image.avatar(),title:f.a.lorem.words(),image_src:!1}),e.push((t=>{var s,i;return i=function(){var i,a,e,r;for(r=[],i=0,a=(e=this.cards).length;i<a;i++)(s=e[i]).id===t&&r.push(s);return r}.call(this)[0],l.a.get(`https://source.unsplash.com/random?sig=${t}`).then(t=>{var s;(s=new Image).onload=(()=>this.$set(this.cards,this.cards.indexOf(i),p({},i,{image_src:t.request.responseURL}))),s.src=t.request.responseURL}).catch(t=>(console.log(t),this.$delete(this.cards,this.cards.indexOf(i))))})(s));return e},addCard:function(t){return t.id=++this.nextCardId,this.cards.push(t)},removeCard:function(t){return t.$card=this.$el.querySelector(`#card-${t.id}`),t.canvas=new class{constructor(t){this.card=t,this.OFFSET=300,this.SPREAD=300,this.$image=new Image,this.$image.crossOrigin="Anonymous",this.$image.onload=this.init.bind(this),this.$image.src=this.card.image_src}init(t){var s,i;return this.c=document.createElement("canvas"),this.ctx=this.c.getContext("2d"),this.$card__image=document.querySelector(`#card-${this.card.id} .thumb`),this.hCanvas=document.createElement("canvas"),this.hCanvas.width=this.$card__image.offsetWidth,this.hCanvas.height=this.$card__image.offsetHeight,i=this.hCanvas.getContext("2d"),s=e(this.hCanvas,i,this.$image,0,10),({w:this.w,h:this.h}=s.size),this.colors=s.arr.map(function(t){return`rgba(${t.r},${t.g},${t.b},${t.a})`}),this.prepareCanvas(),this.card.$card.parentElement.appendChild(this.c)}prepareCanvas(){var t,s,i,e,n,o,c,h,d;for(this.imgPos=this.$card__image.getBoundingClientRect(),this.c.style.position="absolute",this.c.width=this.imgPos.width+2*this.OFFSET,this.c.height=this.imgPos.height+2*this.OFFSET,({left:o,top:this.top}=a(this.$card__image)),this.c.style.top=`${this.top-this.OFFSET}px`,this.c.style.left=`${o-this.OFFSET}px`,this.c.style.display="none",this.circles=[],e=0,this.ctx.clearRect(0,0,this.c.width,this.c.height),s=n=0,h=this.h;0<=h?n<h:n>h;s=0<=h?++n:--n)for(i=c=0,d=this.w;0<=d?c<d:c>d;i=0<=d?++c:--c)this.ctx.fillStyle=this.colors[e],this.ctx.beginPath(),(t={x:i*this.hCanvas.width/this.w+this.OFFSET+this.hCanvas.width/this.w/2,y:s*this.hCanvas.height/this.h+this.OFFSET+this.hCanvas.width/this.w/2,r:this.hCanvas.width/this.w/2*Math.random()*2,progress:0,height:0,alpha:1,dAlpha:.97,color:this.colors[e]}).dx=r(t.x-this.SPREAD,t.x+this.SPREAD),t.dy=r(t.y-this.SPREAD,t.y+this.SPREAD),this.circles.push(t),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!1),this.ctx.fill(),e++;"function"==typeof this.onReady&&this.onReady()}animate(){var t,s,i,a,e,r;for(this.ctx.clearRect(0,0,this.c.width,this.c.height),r=[],s=i=0,a=(e=this.circles).length;i<a;s=++i)t=e[s],this.ctx.globalAlpha=1-t.progress,this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r*(1-t.progress),0,2*Math.PI,!1),r.push(this.ctx.fill());return r}}(t),t.canvas.onReady=this.animateRemove.bind(this,t)},animateRemove:function(t){var s,i;return s=t.$card,{top:0},(i=new o.TimelineMax).set(t.canvas.c,{display:"block"}),i.set(s,{transition:"none"}),i.fromTo(t.canvas.c,1,{opacity:0},{opacity:1}),i.to(s.querySelector(".thumb"),.1,{opacity:0},"-=1"),i.to(s,1,{y:`-=${s.offsetHeight/2}`,scale:"0",opacity:-1,ease:Expo.easeInOut,onComplete:()=>(i.set(s,{transition:"10.5s"}),this.cards.splice(this.cards.indexOf(t),1))},"-=1"),i.to(t.canvas.circles,3,{x:s=>t.canvas.circles[s].dx,y:s=>t.canvas.circles[s].dy,progress:1,onUpdate:t.canvas.animate.bind(t.canvas),onComplete:()=>{if(t.canvas.c.remove(),this.cards.length<6)return console.log(this.cardsCount=Math.floor(5-5*Math.random())||2),this.fetchCards()}},"-=1")}}},m={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"explode"}},[i("avf-transition",{style:{display:t.cards.length>0?"grid":"none"},attrs:{id:"cards"}},t._l(t.cards,function(s,a){return i("div",{key:s.id,staticClass:"card",attrs:{id:"card-"+s.id,"avf-id":s.id}},[s.image_src?t._e():i("h1",{staticStyle:{"text-align":"center"}},[t._v(" ðŸ˜Ž")]),s.image_src?i("div",{staticClass:"inner"},[i("section",{staticClass:"thumb",style:"background-image:url("+s.image_src+")"}),i("section",{staticClass:"btn-group"},[i("button",{on:{click:function(i){t.removeCard(s)}}},[t._v("âœˆ")]),i("button",{on:{click:function(i){t.removeCard(s)}}},[t._v("â™¥")]),i("button",{staticClass:"remove",on:{click:function(i){t.removeCard(s)}}},[t._v("âœ˜")])]),i("section",{staticClass:"meta"},[i("img",{staticClass:"avatar",attrs:{src:s.avatar}}),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v(t._s(s.title))]),i("div",{staticClass:"author"},[t._v("by "+t._s(s.author))])])])]):t._e()])}))],1)},staticRenderFns:[]},g={name:"app",components:{Explode:i("VU/8")(v,m,!1,function(t){i("xFm8")},null,null).exports}},x={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("Explode"),this._v(" "),s("svg",{attrs:{id:"svg-liquid",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("defs",[s("filter",{attrs:{id:"liquid"}},[s("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"6",result:"blur"}}),this._v(" "),s("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10"}})],1)])])],1)},staticRenderFns:[]},y=i("VU/8")(g,x,!1,function(t){i("XBWF")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:y}})},xFm8:function(t,s){}},["orck"]);
//# sourceMappingURL=app.02dd6425583984853720.js.map