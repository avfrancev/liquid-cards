{"version":3,"sources":["webpack:///./src/lib/canvas.coffee","webpack:///./src/components/AVF-Transition/index.coffee","webpack:///./src/components/Explode.vue?1591","webpack:///./src/components/Explode.vue?68e0","webpack:///src/App.vue","webpack:///./src/components/Explode.vue","webpack:///./src/App.vue?0954","webpack:///./src/App.vue","webpack:///./src/main.coffee"],"names":["getOffset","pixelate","rand","min","max","Math","floor","random","el","_x","_y","isNaN","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","top","left","canvas","ctx","img","ind","v","a","b","data","g","h","i","index","length","pixelArray","r","size","w","width","height","drawImage","getImageData","arr","push","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","index_coffee","functional","render","createElement","context","props","name","tag","on","enter","done","tl","getAttribute","TweenMax","from","opacity","y","ease","easeOut","config","onComplete","children","Explode","components","avf-transition","cards","cardz","cardsCount","created","this","fetchCards","methods","j","ref","results","console","log","$metrika","loading","axios_default","get","then","x","Image","onload","id","Date","getTime","author","en_default","findName","avatar","image","title","lorem","words","image_src","request","responseURL","src","addCard","card","nextCardId","removeCard","$card","$el","querySelector","[object Object]","OFFSET","SPREAD","$image","crossOrigin","init","bind","e","colorData","hCtx","c","document","getContext","$card__image","hCanvas","offsetWidth","offsetHeight","colors","map","prepareCanvas","parentElement","appendChild","k","l","m","ref1","imgPos","getBoundingClientRect","style","position","display","circles","clearRect","fillStyle","beginPath","progress","alpha","dAlpha","color","dx","dy","arc","PI","fill","onReady","len","globalAlpha","animateRemove","set","transition","fromTo","to","scale","Expo","easeInOut","splice","indexOf","cind","onUpdate","animate","remove","components_Explode","_vm","_h","$createElement","_c","_self","attrs","_l","staticClass","avf-id","_e","staticStyle","text-align","_v","click","$event","_s","staticRenderFns","App","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","xmlns","version","in","stdDeviation","result","mode","values","src_App","App_normalizeComponent","vue_esm","productionTip","template"],"mappings":"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","file":"static/js/app.504951cd3f7864ab156d.js","sourcesContent":["import {TweenMax, Power0, Elastic} from 'gsap'\n\nrand = (min,max) ->\n  min + Math.floor( Math.random() * (max - min))\n\ngetOffset = (el) ->\n  _x = 0\n  _y = 0\n  while el and !isNaN(el.offsetLeft) and !isNaN(el.offsetTop)\n    _x += el.offsetLeft - (el.scrollLeft)\n    _y += el.offsetTop - (el.scrollTop)\n    el = el.offsetParent\n  {\n    top: _y\n    left: _x\n  }\n\npixelate = (canvas, ctx, img, ind, v) ->\n  # ctx.mozImageSmoothingEnabled = false\n  # ctx.webkitImageSmoothingEnabled = false\n  # ctx.imageSmoothingEnabled = false\n  size = v * 0.01\n  w = Math.floor canvas.width * size\n  h = Math.floor canvas.height * size\n  ctx.drawImage img, 0, 0, w, h\n  ctx.drawImage canvas, 0, 0, w, h, 0, 0, w,h\n\n  imageData = ctx.getImageData 0,0,w,h\n  pixelArray = imageData.data\n  length = pixelArray.length / 4\n\n  data = {\n    size: {w,h}\n    arr: []\n  }\n  i = 0\n  r = 0\n  c = 0\n  while i < length\n    index = 4 * i\n    r = pixelArray[index]\n    g = pixelArray[++index]\n    b = pixelArray[++index]\n    a = pixelArray[++index]\n    data.arr.push {r,g,b,a}\n    i++\n\n  return data\n\n\nexport class Canvas\n  constructor: (@card) ->\n    @OFFSET = 300\n    @SPREAD = 300\n    @$image = new Image\n    @$image.crossOrigin = \"Anonymous\"\n    @$image.onload = @init.bind @\n    @$image.src = @card.image_src\n\n  init: (e)\t->\n    @c = document.createElement 'canvas'\n    @ctx = @c.getContext '2d'\n    @$card__image = document.querySelector \"#card-#{@card.id} .thumb\"\n    @hCanvas = document.createElement 'canvas'\n    @hCanvas.width = @$card__image.offsetWidth\n    @hCanvas.height = @$card__image.offsetHeight\n    hCtx = @hCanvas.getContext '2d'\n    colorData = pixelate @hCanvas, hCtx, @$image, 1, 10\n    {@w,@h} = colorData.size\n    @colors = colorData.arr.map (x) -> \"rgba(#{x.r},#{x.g},#{x.b},#{x.a})\"\n\n    do @prepareCanvas\n    # document.body.appendChild @c\n    @card.$card.parentElement.appendChild @c\n\n\n  prepareCanvas: ->\n    @imgPos = @$card__image.getBoundingClientRect()\n    @c.style.position = 'absolute'\n\n    @c.width = @imgPos.width + @OFFSET*2\n    @c.height = @imgPos.height + @OFFSET*2\n    {left,@top} = getOffset @$card__image\n\n    @c.style.top = \"#{@top-@OFFSET}px\"\n    @c.style.left = \"#{left-@OFFSET}px\"\n    @c.style.display = 'none'\n\n    @circles = []\n\n    k = 0\n    @ctx.clearRect 0,0,@c.width,@c.height\n    for i in [0...@h]\n      for j in [0...@w]\n        @ctx.fillStyle = @colors[k]\n        @ctx.beginPath()\n        c = {\n          x: j*@hCanvas.width/@w + @OFFSET + @hCanvas.width/@w/2\n          y: i*@hCanvas.height/@h + @OFFSET + @hCanvas.width/@w/2\n          r: @hCanvas.width/@w/2*Math.random()*2\n          progress: 0\n          height: 0\n          alpha: 1\n          dAlpha: 0.97\n          color: @colors[k]\n        }\n        c.dx = rand c.x-@SPREAD, c.x+@SPREAD\n        c.dy = rand c.y-@SPREAD, c.y+@SPREAD\n        @circles.push c\n        @ctx.arc c.x, c.y, c.r, 0, 2 * Math.PI, false\n        @ctx.fill()\n        k++\n\n    do @onReady if typeof @onReady is 'function'\n    return\n\n\n  animate: () ->\n    @ctx.clearRect(0,0,@c.width,@c.height)\n    for c,i in @circles\n      @ctx.globalAlpha = 1 - c.progress\n      @ctx.fillStyle = c.color\n      @ctx.beginPath()\n      @ctx.arc c.x, c.y, c.r*(1-c.progress), 0, 2 * Math.PI, false\n      @ctx.fill()\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/canvas.coffee","import './styles.sass'\nimport {TimelineMax, TweenMax, Power4, Elastic, Linear, Expo} from 'gsap'\n\nexport default {\n  functional: true\n  render: (createElement, context) ->\n    data = {\n      context.data...\n      props:\n        name: 'avf-transition'\n        tag: 'div'\n        # css: true\n        # appear: true\n      on:\n        enter: (el, done) ->\n          id = el.getAttribute 'avf-id'\n          tl = new TimelineMax\n          tl.from el, 1, {\n            opacity: 0\n          }\n          tl.from el, 1, {\n            y: 30\n            ease: Elastic.easeOut.config(1, 0.3)\n            onComplete: done\n          }, '-=1'\n    }\n    createElement 'transition-group', data, context.children\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/AVF-Transition/index.coffee","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {TimelineMax, TweenMax} from 'gsap'\nimport {Canvas} from '@/lib/canvas.coffee'\nimport AVFTransition from '@/components/AVF-Transition/index.coffee'\nimport axios from 'axios'\nimport faker from 'faker/locale/en'\n\nexport default {\n\n  components: {'avf-transition': AVFTransition}\n\n  data: ->\n    cards: []\n    cardz: []\n    cardsCount: 6\n\n  created: ->\n    do @fetchCards\n\n  methods:\n    fetchCards: ->\n      console.log @$metrika\n      @loading = true\n      for i in [0...@cardsCount]\n\n        do (i) =>\n\n          # card = (_i for _i in @cards when _i.id is id)[0]\n\n          axios.get(\"https://source.unsplash.com/random?sig=#{i}\", {\n            # method: 'GET'\n            # mode: 'no-cors'\n            # headers: {\n            #   'Access-Control-Allow-Origin': '*'\n            #   # 'Content-Type': 'application/json'\n            # }\n            # withCredentials: true\n            # credentials: 'same-origin'\n          }).then((x) =>\n            img = new Image\n            img.onload = =>\n              id = new Date().getTime()+i\n              # @cardz.push\n              #   id: id\n              @cards.push\n                id: id\n                author: faker.name.findName()\n                avatar: faker.image.avatar()\n                title: faker.lorem.words()\n                image_src: x.request.responseURL\n              # @$set @cards, @cards.indexOf(card), {\n              #   card...\n              #   image_src: x.request.responseURL\n              # }\n            img.src = x.request.responseURL\n            return\n          )\n          # ).catch (err) =>\n            # @$delete @cards, @cards.indexOf(card)\n\n\n\n\n\n    addCard: (card) ->\n      card.id = ++@nextCardId\n      @cards.push card\n\n    removeCard: (card) ->\n      card.$card = @$el.querySelector \"#card-#{card.id}\"\n      card.canvas = new Canvas card\n      card.canvas.onReady = @animateRemove.bind @, card\n\n    animateRemove: (card) ->\n      el = card.$card\n      clipMask =\n        top: 0\n\n      tl = new TimelineMax\n\n      tl.set card.canvas.c, {display: 'block'}\n      tl.set el, {transition: 'none'}\n\n      tl.fromTo card.canvas.c, 1, {opacity:0}, {opacity:1}\n\n      tl.to el.querySelector('.thumb'), 0.1, {\n        opacity: 0\n      }, '-=1'\n\n      tl.to el, 1, {\n        y:\"-=#{el.offsetHeight/2}\"\n        scale: '0'\n        opacity: -1\n        # height: 0\n        ease: Expo.easeInOut\n        # onComplete: -> console.log '---------'\n        onComplete: =>\n          # card.canvas.c.remove()\n          tl.set el, {transition: '10.5s'}\n          @cards.splice @cards.indexOf(card), 1\n      }, '-=1'\n\n      tl.to card.canvas.circles, 3, {\n        x: (cind) => card.canvas.circles[cind].dx\n        y: (cind) => card.canvas.circles[cind].dy\n        # ease: Expo.easeInOut\n        progress: 1\n        onUpdate: card.canvas.animate.bind card.canvas\n        onComplete: =>\n          card.canvas.c.remove()\n          if @cards.length < 6\n            console.log @cardsCount = Math.floor(5 - Math.random()*5) or 2\n            do @fetchCards\n      }, '-=1'\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Explode.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"explode\"}},[_c('avf-transition',{style:({ display: _vm.cards.length > 0 ? 'grid' : 'none' }),attrs:{\"id\":\"cards\"}},_vm._l((_vm.cards),function(card,i){return _c('div',{key:card.id,staticClass:\"card\",attrs:{\"id\":'card-'+card.id,\"avf-id\":card.id}},[(!card.image_src)?_c('h1',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" ðŸ˜Ž\")]):_vm._e(),(card.image_src)?_c('div',{staticClass:\"inner\"},[_c('section',{staticClass:\"thumb\",style:('background-image:url('+card.image_src+')')}),_c('section',{staticClass:\"btn-group\"},[_c('button',{on:{\"click\":function($event){_vm.removeCard(card)}}},[_vm._v(\"âœˆ\")]),_c('button',{on:{\"click\":function($event){_vm.removeCard(card)}}},[_vm._v(\"â™¥\")]),_c('button',{staticClass:\"remove\",on:{\"click\":function($event){_vm.removeCard(card)}}},[_vm._v(\"âœ˜\")])]),_c('section',{staticClass:\"meta\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":card.avatar}}),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(card.title))]),_c('div',{staticClass:\"author\"},[_vm._v(\"by \"+_vm._s(card.author))])])])]):_vm._e()])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6bbc3c80\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Explode.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Explode/>\n    <svg id=\"svg-liquid\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n      <defs>\n        <filter id=\"liquid\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"6\" result=\"blur\" />\n          <feColorMatrix in=\"blur\" mode=\"matrix\" values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10\"/>\n        </filter>\n      </defs>\n    </svg>\n  </div>\n</template>\n\n<script>\nimport Explode from './components/Explode'\n\nexport default {\n  name: 'app',\n  components: {\n    Explode\n  }\n}\n</script>\n\n<style lang=\"sass\">\n\n  @import './colors.sass'\n\n  body\n    background: $color1\n    margin: 0\n\n  button:focus\n    outline: 0\n\n  #app\n    font-family: 'Avenir', Helvetica, Arial, sans-serif\n    -webkit-font-smoothing: antialiased\n    -moz-osx-font-smoothing: grayscale\n    overflow: hidden\n    color: #fff\n\n  #svg-liquid\n    position: absolute\n    top: -999px\n    visibility: hidden\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6bbc3c80\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Explode.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!coffee-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Explode.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6bbc3c80\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Explode.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Explode.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Explode'),_vm._v(\" \"),_c('svg',{attrs:{\"id\":\"svg-liquid\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_c('defs',[_c('filter',{attrs:{\"id\":\"liquid\"}},[_c('feGaussianBlur',{attrs:{\"in\":\"SourceGraphic\",\"stdDeviation\":\"6\",\"result\":\"blur\"}}),_vm._v(\" \"),_c('feColorMatrix',{attrs:{\"in\":\"blur\",\"mode\":\"matrix\",\"values\":\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10\"}})],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-02f41a80\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-02f41a80\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"indentedSyntax\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02f41a80\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n\nnew Vue(\n  el: '#app'\n  template: '<App/>'\n  components: App: App)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.coffee"],"sourceRoot":""}